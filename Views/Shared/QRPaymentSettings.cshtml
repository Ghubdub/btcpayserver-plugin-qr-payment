@{
    var storeId = ViewBag.StoreId;
    var config = ViewBag.Config;
}

<div class="tab-pane active" id="QRPayment">
    <h3>QR Payment Method Configuration</h3>
    <p class="text-muted">Configure custom QR code generation and manual payment settlement.</p>
    
    <form method="post" action="@Url.Action("UpdateQRPaymentConfig", "QRPaymentSettings")">
        @Html.AntiForgeryToken()
        <input type="hidden" name="storeId" value="@storeId" />
        
        <div class="form-group">
            <label for="Title">Payment Method Title</label>
            <input type="text" 
                   class="form-control" 
                   id="Title" 
                   name="Title" 
                   value="@(config?.Title ?? "QR Payment")"
                   maxlength="200"
                   placeholder="e.g., Scan to Pay, Custom QR, etc.">
            <small class="form-text text-muted">The title displayed in your documentation</small>
        </div>
        
        <div class="form-group">
            <label for="Content">Description</label>
            <textarea class="form-control" 
                      id="Content" 
                      name="Content" 
                      rows="3"
                      maxlength="1000"
                      placeholder="Instructions for customers">@(config?.Content)</textarea>
            <small class="form-text text-muted">Description of the payment method</small>
        </div>
        
        <div class="form-group">
            <label for="Order">Display Order</label>
            <input type="number" 
                   class="form-control" 
                   id="Order" 
                   name="Order" 
                   value="@(config?.Order ?? 99)"
                   min="0"
                   max="999"
                   placeholder="99">
            <small class="form-text text-muted">Order in settings list</small>
        </div>
        
        <div class="form-group">
            <div class="checkbox">
                <label>
                    <input type="checkbox" 
                           id="IsEnabled" 
                           name="IsEnabled" 
                           value="true"
                           @(config?.IsEnabled == true ? "checked" : "")>
                    Enable QR Payment API
                </label>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fa fa-save"></i> Save Configuration
            </button>
            <a href="@Url.Action("Index", "Store")" class="btn btn-secondary">
                Cancel
            </a>
        </div>
    </form>
    
    <hr />
    
    <h4>API Endpoints</h4>
    <div class="alert alert-info">
        <h5><i class="fa fa-code"></i> Available Endpoints</h5>
        <ul>
            <li><code>GET /api/v1/plugins/qr-payment/stores/{storeId}/config</code> - Get configuration</li>
            <li><code>PUT /api/v1/plugins/qr-payment/stores/{storeId}/config</code> - Update configuration</li>
            <li><code>POST /api/v1/plugins/qr-payment/stores/{storeId}/generate-qr</code> - Generate QR code</li>
            <li><code>POST /api/v1/plugins/qr-payment/invoices/{invoiceId}/mark-paid</code> - Mark invoice as paid</li>
            <li><code>GET /api/v1/plugins/qr-payment/invoices/{invoiceId}/status</code> - Get payment status</li>
        <p </ul>
       ><small>All endpoints require Greenfield API authentication.</small></p>
    </div>
    
    <h4>Generate QR Code Example</h4>
    <pre><code>curl -X POST \
  -H "Authorization: token YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"invoiceId":"INV123","amount":"99.99","currency":"USD","note":"Payment for order #123"}' \
  https://your-btcpay-server.com/api/v1/plugins/qr-payment/stores/YOUR_STORE_ID/generate-qr</code></pre>
    
    <h4>Mark as Paid Example</h4>
    <pre><code>curl -X POST \
  -H "Authorization: token YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"notes":"Received via bank transfer"}' \
  https://your-btcpay-server.com/api/v1/plugins/qr-payment/invoices/INV123/mark-paid</code></pre>
</div>

<style>
.form-group {
    margin-bottom: 24px;
}

.form-group label {
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    display: block;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group textarea {
    max-width: 100%;
}

.checkbox label {
    font-weight: normal;
    cursor: pointer;
}

.form-actions {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
}

.form-actions .btn {
    margin-right: 8px;
}

.alert {
    padding: 16px;
    border-radius: 4px;
    margin: 16px 0;
}

.alert-info {
    background: #d1ecf1;
    border: 1px solid #bee5eb;
    color: #0c5460;
}

pre {
    background: #f5f5f5;
    padding: 12px;
    border-radius: 4px;
    overflow-x: auto;
}

code {
    background: #f0f0f0;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
}
</style>
